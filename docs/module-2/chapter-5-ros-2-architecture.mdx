---
title: Chapter 5 - ROS 2 Architecture
---

# Chapter 5: ROS 2 Architecture

## Learning Objectives

- Understand ROS 2 core concepts: nodes, topics, services, actions
- Explain DDS (Data Distribution Service) and real-time considerations
- Describe how ROS 2 enables communication between robot components

## Conceptual Foundations

ROS 2 (Robot Operating System 2) is the middleware framework that enables communication and coordination between different software components in a robotic system. It provides a standardized way for different parts of a robot to exchange information (Quigley et al., 2009).

### Core ROS 2 Concepts

#### Nodes
- **Definition**: Individual processes that perform computation
- **Function**: Encapsulate specific functionality (sensors, controllers, algorithms)
- **Communication**: Nodes communicate with each other through topics, services, and actions (Faconti et al., 2018)

#### Topics
- **Definition**: Publish-subscribe communication pattern
- **Characteristics**: Asynchronous, many-to-many communication
- **Use cases**: Sensor data streaming, state information broadcasting
- **Quality of Service (QoS)**: Configurable reliability and performance parameters (Koubaa, 2020)

#### Services
- **Definition**: Request-response communication pattern
- **Characteristics**: Synchronous, one-to-one communication
- **Use cases**: Configuration requests, one-time operations, blocking calls
- **Structure**: Request message type and Response message type

#### Actions
- **Definition**: Goal-oriented communication pattern with feedback
- **Characteristics**: Long-running operations with status updates
- **Use cases**: Navigation goals, manipulation tasks, complex behaviors
- **Structure**: Goal, Feedback, and Result messages

### DDS and Real-Time Considerations

#### Data Distribution Service (DDS)
- **Purpose**: Provides the underlying communication infrastructure (Koubaa, 2020)
- **Features**: Reliable message delivery, Quality of Service controls, discovery
- **Implementation**: Multiple DDS vendors (Fast DDS, Cyclone DDS, RTI Connext)

#### Real-Time Considerations
- **Deterministic timing**: Ensuring predictable response times
- **Message prioritization**: Handling critical vs non-critical data
- **Resource management**: Managing CPU and memory usage (Faconti et al., 2018)
- **Deadline requirements**: Meeting timing constraints for safety

## System Architecture

ROS 2 follows a distributed architecture (Quigley et al., 2009):

```
Node A ──┐
          ├── DDS Middleware ── Communication Infrastructure
Node B ──┤
          ├── Parameter Server
Node C ──┘
```

### Communication Patterns

- **Publisher/Subscriber**: Data streaming between nodes
- **Client/Service**: Request/response interaction (Faconti et al., 2018)
- **Action Client/Server**: Long-running tasks with feedback

## Practical Labs / Simulations

### Lab 5.1: ROS 2 Basic Communication
- **Requirements**: ROS 2 installation (Humble Hawksbill or later), basic Python knowledge
- **Tools**: ROS 2, Python, rclpy
- **Complexity**: Beginner
- **Steps**:
  1. Create a simple publisher node
  2. Create a simple subscriber node
  3. Run both nodes and observe message exchange
  4. Experiment with different QoS settings
- **Expected Outcome**: Student can create and run basic ROS 2 publisher-subscriber nodes
- **Citations**: Based on concepts from (Quigley et al., 2009) and (Koubaa, 2020)

## AI-Agent Interaction Prompts

### Tutor Prompts
- "Explain the differences between ROS 2 topics, services, and actions" (Faconti et al., 2018)
- "What is DDS and why is it important for ROS 2?" (Koubaa, 2020)

### Debugging Prompts
- "How do you troubleshoot communication issues between ROS 2 nodes?"
- "What are common QoS configuration problems and solutions?" (Quigley et al., 2009)

### "Explain-this-system" Prompts
- "Explain how ROS 2 enables modular robot software architecture"
- "Describe the role of DDS in providing reliable robot communication"

## Summary & Readiness Check

- ROS 2 provides middleware for robot software component communication (Quigley et al., 2009)
- Core concepts include nodes, topics, services, and actions
- DDS provides the underlying communication infrastructure (Koubaa, 2020)
- QoS parameters control communication reliability and performance

### Capstone Relevance

ROS 2 architecture is fundamental for connecting all components of autonomous humanoid robots in the capstone project.

## References

1. Quigley, M., Gerkey, B., & Smart, W. D. (2009). Programming robots with ROS: A practical introduction to the Robot Operating System. *O'Reilly Media*.

2. Koubaa, A. (2020). ROS robotics projects: Design autonomous robots with ROS, Gazebo, and TensorFlow. *Packt Publishing*.

3. Faconti, P., Mazzini, F., & Garzón, J. (2018). Design patterns for ROS publishers and subscribers. *IEEE Robotics & Automation Magazine*, 25(2), 100-111.

4. Coltin, B., & Veloso, M. (2014). Interactive object recognition for autonomous robot manipulation. *IEEE Transactions on Robotics*, 30(2), 458-469.

5. ROS.org. (2023). ROS 2 Documentation. Retrieved from https://docs.ros.org/en/humble/